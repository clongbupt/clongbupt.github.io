<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />


  <meta name="google-site-verification" content="VvyjvVXcJQa0QklHipu6pwm2PJGnnchIqX7s5JbbT_0" />







  <link rel="stylesheet" type="text/css" href="vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  
    <link href='//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  


<link rel="stylesheet" type="text/css" href="vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" />

<link rel="stylesheet" type="text/css" href="css/main.css?v=0.4.5.2"/>


    <meta name="description" content="一个不会煮面的码农的小窝" />



  <meta name="keywords" content="Hexo, NexT" />





  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />


<meta name="description" content="一个不会煮面的码农的小窝">
<meta property="og:type" content="website">
<meta property="og:title" content="clongbupt的小窝">
<meta property="og:url" content="http://clongbupt.github.io/index.html">
<meta property="og:site_name" content="clongbupt的小窝">
<meta property="og:description" content="一个不会煮面的码农的小窝">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="clongbupt的小窝">
<meta name="twitter:description" content="一个不会煮面的码农的小窝">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post'
  };
</script>



  <title> clongbupt的小窝 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?50c15455e37f70aea674ff4a663eef27";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">clongbupt的小窝</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">好的，老婆。那我就开始吐槽了。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/08/09/cig9jq2b2000ev5qky9rf3vjb/" itemprop="url">
                  富士山归来
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-08-09T00:00:00+09:00" content="2015-08-09">
              2015-08-09
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/08/09/cig9jq2b2000ev5qky9rf3vjb/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/09/cig9jq2b2000ev5qky9rf3vjb/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="img/2015080901.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080901.pic.jpg" itemprop="contentUrl"/>
              </a>
            
          
            
              <a class="post-gallery-img fancybox"
                 href="img/2015080902.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080902.pic.jpg" itemprop="contentUrl"/>
              </a>
            
          
            
              <a class="post-gallery-img fancybox"
                 href="img/2015080903.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080903.pic.jpg" itemprop="contentUrl"/>
              </a>
            </div>
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="img/2015080904.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080904.pic.jpg" itemprop="contentUrl"/>
              </a>
            
          
            
              <a class="post-gallery-img fancybox"
                 href="img/2015080905.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080905.pic.jpg" itemprop="contentUrl"/>
              </a>
            
          
            
              <a class="post-gallery-img fancybox"
                 href="img/2015080906.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080906.pic.jpg" itemprop="contentUrl"/>
              </a>
            </div>
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="img/2015080907.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080907.pic.jpg" itemprop="contentUrl"/>
              </a>
            
          
            
              <a class="post-gallery-img fancybox"
                 href="img/2015080908.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080908.pic.jpg" itemprop="contentUrl"/>
              </a>
            
          
            
              <a class="post-gallery-img fancybox"
                 href="img/2015080909.pic.jpg" rel="gallery_cig9jq2b2000ev5qky9rf3vjb"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="img/2015080909.pic.jpg" itemprop="contentUrl"/>
              </a>
            </div>
          

          
          
        </div>
      

      
        
          <span itemprop="articleBody">
            
              <blockquote class="blockquote-center">这一刻</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/07/15/cig9jq2aw0004v5qkonmw2unv/" itemprop="url">
                  进程线程协程一锅炖
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-07-15T00:00:00+09:00" content="2015-07-15">
              2015-07-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/07/15/cig9jq2aw0004v5qkonmw2unv/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/15/cig9jq2aw0004v5qkonmw2unv/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="进程">进程</h2><p>一般来说，进程的定义为操作系统进行资源分配和任务调度的基本单位。很熟悉吧，每次操作系统期末考的必考题 :)</p>
<p>但细想下，还有一些值得反复咀嚼的精华。</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ps -ef</span><br><span class="line">$ top</span><br><span class="line">$ ls /<span class="keyword">proc</span>/&lt;pid&gt;/fd</span><br></pre></td></tr></table></figure>
<p>这些简单的命令可以看到操作系统上的很多进程信息，如<code>PID</code>, <code>State</code>, <code>fds</code>(已打开文件描述符)。这些信息均来自一个耳熟能详的名字——PCB(进程控制块，Process Control Block)</p>
<p>不过不幸的是，用户空间很难直接打开PCB查看，PCB一般被放置在内核栈中。 <a href="https://en.wikipedia.org/wiki/Process_control_block" target="_blank" rel="external">1</a></p>
<p>那么进程除了PCB，还有啥。进程一般由程序、数据集合和进程控制块三部分组成。 程序即程序， 运行进程的代码块，程序猿们耗费无数青春的地方。 数据集合是程序在执行时所需要的数据和工作区。</p>
<p>由此可产生一个浅显的结论：进程是程序运行的实体。程序本身只是指令、代码及其组织形式的描述，进程则是程序加载到系统、资源、CPU上的运行实例。 因此多个进程可能与同一个程序有关，但每个进程又独立运行，因为PCB不一样。</p>
<p>进程是资源分配的基本单位，那么资源是什么？ 资源是最底层的硬件（CPU、RAM、DISK、NET DEVICES）在操作系统视角上的抽象（CPU timestamp, memory, file, ip/port）。</p>
<p>资源分配大多发生在新建进程时，一般我们会把所分配的资源相关信息存放到PCB中。</p>
<p>当然我们也可以在进程运行时分配更多资源，如长期霸占CPU(阻塞IO)、占用更多内存（新建对象，动态分配堆）、打开更多文件，写入数据等等。</p>
<p><img src="img/process1.png" alt="Process life circle"></p>
<p>从上图可以看到PCB的常见信息，同时还有更大的信息点是进程的生命周期：</p>
<p>实质很简单：既然可以创建进程，自然可以杀死进程，同时操作系统为进行任务调度：即让进程进行运行和等待状态的切换。</p>
<p>这也是为什么进程是操作系统进行任务调度的基本单位。同时，也是操作系统运行了好几十个进程，使用上却一点没有卡顿的感觉的本质。</p>
<p>调度有很多种，但当前操作系统的调度主要是一种：基于时间片的抢占式调度。</p>
<p>基于时间片是指假想把CPU的运行按照时间轴切成一片片的零碎时间，每片时间运行不同的进程。</p>
<p>抢占式是时间片到了，操作系统会强制切换正在运行的进程的状态，好让等待的进程获得运行的机会。</p>
<h2 id="线程">线程</h2><h2 id="协程">协程</h2><h2 id="参考资料">参考资料</h2><blockquote>
<p><a href="https://en.wikipedia.org/wiki/Process_control_block" target="_blank" rel="external">https://en.wikipedia.org/wiki/Process_control_block</a></p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/07/01/cig9jq2bj001dv5qkf0pnggln/" itemprop="url">
                  Golang总结一
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-07-01T00:00:00+09:00" content="2015-07-01">
              2015-07-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/07/01/cig9jq2bj001dv5qkf0pnggln/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/01/cig9jq2bj001dv5qkf0pnggln/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>从13年开始接触golang，一直对golang十分喜爱，前前后后写过一些代码，包括业余的，生产环境的项目。 一直想写点总结好让后来人少趟点坑，正好周末天气不好，只能窝在家中写总结。</p>
<h2 id="先说$GOPATH">先说$GOPATH</h2><p>基本每个刚入门golang的都得先跟$GOPATH过个照面，相信网上也有很多资料，如何设置使go代码运行，怎样设置更适合自己，相信每个老手都有自己的想法与判断。</p>
<p>我且说说我的思考。</p>
<ul>
<li>$GOPATH是Golang唯一必须设置的环境变量</li>
<li>$GOPATH指向的golang的标准工作区</li>
<li>$GOPATH可以根据具体情况自由更改</li>
<li>$GOPATH可以指定多个位置</li>
</ul>
<p>golang官方关于$GOPATH的介绍如下：</p>
<blockquote>
<p>The GOPATH environment variable is used to specify directories outside of $GOROOT that contain the source for GO projects and their binaries.</p>
</blockquote>
<p>$GOPATH是一个环境变量。它指定golang项目的源码和可执行码路径。在$GOROOT之外。</p>
<p>不得不提下$GOROOT。</p>
<p>$GOROOT是GO可执行命令的路径，默认为操作系统的个人用户可执行目录。如Ubuntu下<code>/usr/local/bin</code>。</p>
<p>如果通过安装文件(dmg/exe)或包管理器(apt-get/yum)默认安装，GO可执行命令在环境路径下，<strong>无须设置</strong>。 当用户编译安装，自由指定目录时，设置$GOROOT，并将其放入环境路径下。如<code>/usr/local/go</code>，需将其插入PATH中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GOROOT=/usr/<span class="built_in">local</span>/go</span><br><span class="line">$ <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$GOROOT</span>/bin</span><br></pre></td></tr></table></figure>
<h3 id="$GOPATH与标准工作区">$GOPATH与标准工作区</h3><p>提$GOPATH不得不提标准工作区。Golang的标准工作区不太简单，也不优雅。但一旦习惯，确实很实用。官网方描述如下:</p>
<blockquote>
<p>A workspace is a directory hierarchy with three directories at its root:</p>
<p>src contains Go source files organized into packages (one package per directory), pkg contains package objects, and bin contains executable commands.</p>
</blockquote>
<p>Golang工作区是一个包含有<code>src</code>, <code>bin</code>, <code>pkg</code>三个目录的根路径。</p>
<p>$GOPATH指定了Golang的工作区。可以指定系统任意位置，如<code>$HOME</code>, <code>$HOME/work</code>。官方推荐：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOPATH=<span class="variable">$HOME</span></span><br></pre></td></tr></table></figure>
<p>注意，$GOPATH不能与$GOROOT一致。</p>
<h3 id="属于$GOPATH的自由">属于$GOPATH的自由</h3><p>虽然80%的情形，无须修改$GOPATH。但$GOPATH是一个环境变量，我们可以根据需求任意对其进行临时修改。而且对于某些场景，修改$GOPATH不失为一个好的临时解决方案：</p>
<p>场景一： git clone</p>
<p>当在文件系统任意位置git clone外部Golang项目后，只需临时修改$GOPATH即可快速运行</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="char">$ </span>git clone <span class="method">https:</span>//github.com/cloudfoundry/hm-workspace</span><br><span class="line"><span class="char">$ </span>cd hm-workspace</span><br><span class="line"><span class="char">$ </span>export <span class="class">GOPATH</span>=<span class="char">$P</span>WD</span><br><span class="line"><span class="char">$ </span>go install</span><br></pre></td></tr></table></figure>
<p>场景二: direnv</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/direnv/direnv</span><br><span class="line">$ <span class="keyword">cd</span> direnv</span><br><span class="line">$ <span class="keyword">make</span> install</span><br><span class="line"></span><br><span class="line">$ <span class="keyword">cd</span> &lt;your-workspace&gt;</span><br><span class="line">$ <span class="keyword">vim</span> .envrc</span><br></pre></td></tr></table></figure>
<h3 id="$GOPATH是可以指定多个位置">$GOPATH是可以指定多个位置</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ export GOPATH=$HOME:$HOME/workspace&lt;:<span class="keyword">...</span>&gt;</span><br></pre></td></tr></table></figure>
<p>理解这层，可以很快地解决$GOPATH问题，即把所有需要用的内部外部依赖，均放到$GOPATH上。</p>
<p>对于开发环境，可以更灵活地运行实验项目。</p>
<p>对于生产环境，可以更好地解耦依赖，实现自动化。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GOPATH=<span class="variable">$PWD</span>:<span class="variable">$PWD</span>/Godep/_workspace go build -o <span class="variable">$PWD</span>/bin</span><br></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2><blockquote>
<p><a href="https://golang.org/doc/code.html" target="_blank" rel="external">https://golang.org/doc/code.html</a></p>
<p><a href="https://github.com/golang/go/wiki/GOPATH" target="_blank" rel="external">https://github.com/golang/go/wiki/GOPATH</a></p>
<p><a href="https://github.com/direnv/direnv" target="_blank" rel="external">https://github.com/direnv/direnv</a></p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/04/01/cig9jq2b7000nv5qkp8x9l4il/" itemprop="url">
                  One Method of Heartbeat Debugging
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-04-01T00:00:00+09:00" content="2015-04-01">
              2015-04-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/04/01/cig9jq2b7000nv5qkp8x9l4il/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/01/cig9jq2b7000nv5qkp8x9l4il/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>This article mainly focuses on introducing one method of heartbeat debugging. It will include some key points listed as below:  </p>
<ul>
<li>Some basic thoughts on how to diagnose a network bug among cluster</li>
<li>How to handle network level 2 problem</li>
<li>Some frequently used commands or tools: tcpdump, arp, etc.</li>
</ul>
<h2 id="Prerequirements">Prerequirements</h2><p>First of all assume that we have two nodes installed heartbeat.<br>Well, if you do not know about heartbeat, here is some useful resource links:</p>
<ul>
<li>Heartbeat Official User Guide</li>
<li>Rakuten DBA HeartBeat Setting manual</li>
</ul>
<h2 id="Environment">Environment</h2><p>As mentioned above, We’ve got two nodes that which had already installed heartbeat. Let us assume their IP listed as below:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.40.64</span><br><span class="line">192.168.41.63</span><br></pre></td></tr></table></figure></p>
<p>Before start them, we need setup their configuration files, generally speaking it includs:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ha<span class="class">.cf</span></span><br><span class="line">haresource</span><br><span class="line">authkeys</span><br></pre></td></tr></table></figure></p>
<p>For <code>ha.cf</code>, the configuration is listed as below:</p>
<p><img src="img/201504011.png" alt="Configuration of ha.cf"></p>
<p>Among ha.cf, some fields has is easy to know, some we would pick up and describe. ‘crm off’ means Cluster Resource Manager(crm) is off. ‘auto_failback off’ means standby is working and it will not return its resource whether master is recovered or not. ‘node node-0’ means config every node need connect through heartbeat and ‘node-0’ is server name, you can use ‘uname -n’ get it.<br>haresource will configure a virtual IP address to make heartbeat nodes act as one server. Below is configuration example:</p>
<p><img src="img/201504013.png" alt="Example configuration of virtual ip"></p>
<p>‘192.168.40.1’ is a virtual IP, the most important here you need specify is when your nodes real IP and virtual IP are not in the same subnet, please add netmask, in this configuration file is ‘24’<br>authkeys stores how authenticate among heartbeat nodes. generally speaking there are three authentication types. ‘crc’, ‘md5’ and ‘sha1’, if you network is secure, use ‘crc’ is enough. If not please use ‘sha1’.<br>Here is the example:</p>
<p><img src="img/201504012.png" alt="Example configuration of authentication methods"></p>
<p>Some useful commands of start / stop heartbeat as a service.<br><figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">service</span> heartbeat <span class="literal">start</span></span><br><span class="line">sudo <span class="keyword">service</span> heartbeat <span class="literal">stop</span></span><br></pre></td></tr></table></figure></p>
<p>But please always remember it is only useful under Ubuntu and install heartbeat as a service.</p>
<h2 id="Debug">Debug</h2><p>Frankly speaking, if you setup your configuration file as above example, you maybe configure heartbeat successfully without debug. But if it is just not work, so we still need to learn how to debug with heartbeat.</p>
<h3 id="Logs">Logs</h3><p>Every mature software or service should have logs, no exception for heartbeat. The log addresses is right in the ha.cf config file.<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail -<span class="keyword">f</span> /var/<span class="built_in">log</span>/<span class="keyword">ha</span>-<span class="keyword">debug</span></span><br><span class="line"><span class="keyword">vim</span> /var/<span class="built_in">log</span>/<span class="keyword">ha</span>-<span class="built_in">log</span></span><br></pre></td></tr></table></figure></p>
<p>Use ‘tail -f’ or ‘vim’ depends on yourself.</p>
<h3 id="Virtual_IP_Interface">Virtual IP Interface</h3><p>When every heartbeat starts it will try to setup a Virtual IP address, this address is specified in haresource file. We can use ‘ifconfig’ command easily observe this. But It reports an error, here is an useful command to debug.<br>sudo ifconfig eth0:100 192.168.40.1 netmask 255.255.255.0 broadcast 192.168.40.255<br>This command will setup a virtual IP Interface with specified IP 192.168.40.1 and also netmask, broadcast. </p>
<h3 id="ARP">ARP</h3><p>Using arp, we can find whether heartbeat nodes are connected with each other or not. Command is like this:<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp -<span class="literal">a</span></span><br></pre></td></tr></table></figure></p>
<p>Actually every IP Interface would have a arp list, it will store mappings between IP address and MAC address. If they are connected, we can got a record like this:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">node-0</span> (192<span class="class">.168</span><span class="class">.40</span><span class="class">.64</span>) <span class="tag">at</span> 00<span class="pseudo">:50</span><span class="pseudo">:56</span><span class="pseudo">:cc</span><span class="pseudo">:ee</span><span class="pseudo">:ff</span> <span class="attr_selector">[ehter]</span> <span class="tag">on</span> <span class="tag">eth0</span></span><br></pre></td></tr></table></figure></p>
<h3 id="SEND_ARP_&amp;_TCPDUMP">SEND_ARP &amp; TCPDUMP</h3><p>Using send_arp to mock a virtual IP and use TCPDUMP to detect is there any arp requests online. Some commands are listed as below:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">send_arp</span> 192<span class="class">.168</span><span class="class">.40</span><span class="class">.4</span> 00<span class="pseudo">:11</span><span class="pseudo">:22</span><span class="pseudo">:aa</span><span class="pseudo">:bb</span><span class="pseudo">:cc</span> 192<span class="class">.168</span><span class="class">.40</span><span class="class">.4</span> <span class="tag">fffffffffff</span></span><br></pre></td></tr></table></figure></p>
<p>Using ‘tcpdump’ to catch every arp request and response. Here is the example command:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tcpdump -<span class="tag">i</span> eth0 arp</span><br></pre></td></tr></table></figure></p>
<p>Example result is listed as below:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">07<span class="pseudo">:46</span><span class="pseudo">:07</span><span class="class">.651105</span> <span class="tag">ARP</span>, <span class="tag">Request</span> <span class="tag">who-has</span> 127<span class="class">.0</span><span class="class">.1</span><span class="class">.1</span> <span class="tag">tell</span> 127<span class="class">.0</span><span class="class">.1</span><span class="class">.1</span>, <span class="tag">length</span> 46</span><br><span class="line">07<span class="pseudo">:46</span><span class="pseudo">:08</span><span class="class">.151360</span> <span class="tag">ARP</span>, <span class="tag">Reply</span> 127<span class="class">.0</span><span class="class">.1</span><span class="class">.1</span> <span class="tag">is-at</span> 00<span class="pseudo">:00</span><span class="pseudo">:00</span><span class="pseudo">:56</span><span class="pseudo">:00</span><span class="pseudo">:05</span> (<span class="tag">oui</span> <span class="tag">Ethernet</span>), <span class="tag">length</span> 46</span><br></pre></td></tr></table></figure></p>
<h3 id="Nats_Server_working_with_heartbeat">Nats Server working with heartbeat</h3><p>Regarding to our team, heartbeat will work for nats server to promise that nats-server will always alive.<br>In terms of nats server, we’ve one useful command ‘nats-top’ to check whether which is working.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> nats-installation-directory</span><br><span class="line">./bin/nats-top</span><br></pre></td></tr></table></figure></p>
<h2 id="Conclusion">Conclusion</h2><p>Debug with heartbeat is not only focus on heartbeat, but also know about environment context, research on arp protocol. In this means what we are doing is totally based on what we learned before such as arp, IP Interface. But we need to use what we learn in real work and also try it, fix it as quick as possible. To profit our team, even our company.</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/03/30/cig9jq2bk001ev5qk15pgvz2o/" itemprop="url">
                  如何创建一个简单的gem包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-30T00:00:00+09:00" content="2015-03-30">
              2015-03-30
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/03/30/cig9jq2bk001ev5qk15pgvz2o/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/30/cig9jq2bk001ev5qk15pgvz2o/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="gem_example">gem_example</h2><p>通过<code>rubygem</code>内置的工具可以轻松地把代码打包成<code>gem</code>。下面创建一个简单的<code>gem_example</code>案例.</p>
<h3 id="开始">开始</h3><p>首先，新建一个目录，并创建一个<code>gem_example.ruby</code>和<code>gem_example.gemspec</code>的文件，具体的目录结构如下:<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-gem_example.gemspec</span><br><span class="line">`<span class="comment">--lib</span></span><br><span class="line">    `<span class="comment">--gem_example.rb</span></span><br></pre></td></tr></table></figure></p>
<p><em>注意</em></p>
<ol>
<li>代码一般放在<code>lib</code>目录中</li>
<li>约定俗成，<code>lib</code>内有一个文件的文件名与<code>gem</code>名称一样</li>
</ol>
<p>下面开始在<code>lib/gem_example.rb</code>中编写一点内容，具体如下:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GemExample</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span><span class="keyword">self</span>.hi</span><br><span class="line">    puts <span class="string">"Hello world!"</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>最后，介绍一下<code>gemspec</code>。其内部主要定义改<code>gem</code>的版本、依赖等。示例如下：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Gem::Specification.<span class="built_in">new</span> <span class="built_in">do</span> |s|</span><br><span class="line">  s.name              = <span class="string">'gem_example'</span></span><br><span class="line">  s.<span class="built_in">version</span>           = <span class="string">'0.0.1'</span></span><br><span class="line">  s.<span class="built_in">date</span>              = <span class="string">'2015-02-24'</span></span><br><span class="line">  s.summary           = <span class="string">"An Simple Gem Example!"</span></span><br><span class="line">  s.description       = <span class="string">"A simple example of introducing how to use gem"</span></span><br><span class="line">  s.authors           = [<span class="string">"Changlong Wu"</span>]</span><br><span class="line">  s.email             = <span class="string">'clongbupt@gmail.com'</span></span><br><span class="line">  s.<span class="built_in">files</span>             = [<span class="string">"lib/gem_example.rb"</span>, <span class="string">"lib/gem_example/translator.rb"</span>]</span><br><span class="line">  s.executables &lt;&lt; <span class="string">'gem_example'</span> </span><br><span class="line">  s.homepage          = </span><br><span class="line">    <span class="string">'http://github.com/clongbupt/gem_example'</span></span><br><span class="line">  s.license           = <span class="string">'MIT'</span></span><br><span class="line"><span class="function"><span class="keyword">end</span></span></span><br></pre></td></tr></table></figure></p>
<p><code>gem build</code>会读取<code>gemspec</code>，并以此标识和分发<code>gem</code>。具体命令如下：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">gem</span> build gem_example.gemspec</span><br></pre></td></tr></table></figure></p>
<p>控制台输出的结果为:<br><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gem build gem_example.gemspec</span><br><span class="line">  Successfully built RubyGem</span><br><span class="line">  Name: gem_example</span><br><span class="line">  <span class="keyword">Version</span>: <span class="number">0.0</span><span class="number">.1</span></span><br><span class="line">  <span class="keyword">File</span>: gem_example-<span class="number">0.0</span><span class="number">.1</span>.gem</span><br></pre></td></tr></table></figure></p>
<p>在<code>irb</code>中可以对其进行测试。示例如下：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">irb </span><br><span class="line"><span class="built_in">require</span> ‘gem_example’ </span><br><span class="line"><span class="literal">true</span> </span><br><span class="line">GemExample.hi</span><br></pre></td></tr></table></figure></p>
<p>输出结果为<code>hello world</code>。</p>
<h3 id="发布">发布</h3><p>发布之前，首先要配置登录到<code>rubygem</code>的信息:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; curl -u yourusername_on_rubygem</span><br><span class="line"><span class="symbol">https:</span>/<span class="regexp">/rubygems.org/api</span><span class="regexp">/v1/api</span>_key.yaml &gt;</span><br><span class="line">~<span class="regexp">/.gem/credentials</span>; chmod <span class="number">0600</span> ~<span class="regexp">/.gem/credentials</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Enter </span>host password <span class="keyword">for</span> user <span class="string">'yourusername_on_rubygem'</span><span class="symbol">:</span></span><br></pre></td></tr></table></figure></p>
<p>如果系统限制等,无法使用<code>curl</code>，<code>openssl</code>等,可以通过浏览器访问链接<code>https://rubygems.org/api/v1/api_key.yaml</code>,它会让你登录的,<br>成功则会下载一个认证信息文件<code>api_key.yaml</code>,完了直接把它放到<code>~/.gem/</code>文件夹下,重命名为<strong>credentials</strong><br>一切设置妥当之后,就可以<code>push</code>你的<code>gem</code>了。具体示例如下：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gem push hola-<span class="number">0.0</span>.<span class="number">0</span><span class="class">.gem</span></span><br><span class="line">    Pushing gem to RubyGems<span class="class">.org</span>...</span><br><span class="line">    Successfully registered gem: hola (<span class="number">0.0</span>.<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p>
<p>上传成功后，你就可以通过下面命令<code>check</code>到自己的<code>gem</code>了:<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem <span class="type">list</span> -r gem_example</span><br></pre></td></tr></table></figure></p>
<p>然后尝试安装:<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem <span class="keyword">install</span> gem_example</span><br></pre></td></tr></table></figure></p>
<h3 id="进阶">进阶</h3><p>修改文件<code>lib/gem_example.rb</code>中的内容为：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GemExample</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span><span class="keyword">self</span>.hi(language = <span class="string">"english"</span>)</span><br><span class="line">    translator = <span class="constant">Translator</span>.new(language)</span><br><span class="line">    translator.hi</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GemExample::Translator</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span>initialize(language)</span><br><span class="line">    <span class="variable">@language</span> = language</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span>hi</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">@language</span></span><br><span class="line">    <span class="keyword">when</span> <span class="string">"spanish"</span></span><br><span class="line">      <span class="string">"hola mundo"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="string">"hello world"</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>其中，可以将<code>Translator</code>进行拆分。一般推荐把目录结构调整为如示例所示样子:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">├── gem_example<span class="class">.gemspec</span></span><br><span class="line">└── lib</span><br><span class="line">    ├── gem_example</span><br><span class="line">    │   └── translator<span class="class">.rb</span></span><br><span class="line">    └── gem_example.rb</span><br></pre></td></tr></table></figure></p>
<p>接着，修改<code>lib/gem_example.rb</code>文件:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">'lib/translator'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GemExample</span></span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> </span><span class="keyword">self</span>.hi(language = <span class="string">"english"</span>)</span><br><span class="line">        translator = <span class="constant">Translator</span>.new(language)</span><br><span class="line">        translator.hi</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p><em>注意</em>同时还需要修改<code>gemspec</code>文件, 把新添加的目录和文件索引进去, 否则打包时无法找到新文件。<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Gem::Specification.<span class="built_in">new</span> <span class="built_in">do</span> |s|</span><br><span class="line">  s.name              = <span class="string">'gem_example'</span></span><br><span class="line">  s.<span class="built_in">version</span>           = <span class="string">'0.0.1'</span></span><br><span class="line">  s.<span class="built_in">date</span>              = <span class="string">'2015-02-24'</span></span><br><span class="line">  s.summary           = <span class="string">"An Simple Gem Example!"</span></span><br><span class="line">  s.description       = <span class="string">"A simple example of introducing how to use gem"</span></span><br><span class="line">  s.authors           = [<span class="string">"Changlong Wu"</span>]</span><br><span class="line">  s.email             = <span class="string">'clongbupt@gmail.com'</span></span><br><span class="line">  s.<span class="built_in">files</span>             = [<span class="string">"lib/gem_example.rb"</span>, <span class="string">"lib/gem_example/translator.rb"</span>]</span><br><span class="line">  s.executables &lt;&lt; <span class="string">'gem_example'</span> </span><br><span class="line">  s.homepage          = </span><br><span class="line">    <span class="string">'http://github.com/clongbupt/gem_example'</span></span><br><span class="line">  s.license           = <span class="string">'MIT'</span></span><br><span class="line"><span class="function"><span class="keyword">end</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="添加可执行文件">添加可执行文件</h3><p>在与<code>lib/</code>目录同级的地方新建<code>bin/</code>目录。然后在<code>gemspec</code>里添加他们。具体操作如下：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mkdir</span> bin</span><br><span class="line">touch bin/gem_example</span><br><span class="line"><span class="keyword">chmod</span> a+<span class="keyword">x</span> bin/gem_example</span><br></pre></td></tr></table></figure></p>
<p>在文件中添加如下代码。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ruby</span><br><span class="line"></span><br><span class="line">require <span class="string">'gem_example'</span></span><br><span class="line">puts GemExample.<span class="function"><span class="title">hi</span><span class="params">(ARGV[<span class="number">0</span>])</span></span></span><br></pre></td></tr></table></figure></p>
<p>之后在<code>gemspec</code>文件里添加可执行的文件配置说明:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s<span class="class">.name</span>        = <span class="string">'gem_example'</span></span><br><span class="line">s<span class="class">.version</span>     = <span class="string">'0.0.1'</span></span><br><span class="line">s<span class="class">.executables</span> &lt;&lt; <span class="string">'gem_example'</span>  #可执行文件</span><br></pre></td></tr></table></figure></p>
<h3 id="测试">测试</h3><p>TEST YOUR GEM!<br>一般会用<code>TEST::Unit</code>。它是<code>ruby</code>内置的测试框架，有很多的教程在网上可以找到。<br>首先创建文件<code>Rakefile</code>和文件夹<code>test</code>，如下所示：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── Rakefile</span><br><span class="line">├── bin</span><br><span class="line">│   └── gem_example</span><br><span class="line">├── gem_example<span class="class">.gemspec</span></span><br><span class="line">├── lib</span><br><span class="line">│   ├── gem_example</span><br><span class="line">│   │   └── translator<span class="class">.rb</span></span><br><span class="line">│   └── gem_example<span class="class">.rb</span></span><br><span class="line">└── test</span><br><span class="line">    └── test_gem_example.rb</span><br></pre></td></tr></table></figure></p>
<p>编辑test_gem_example.rb。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">'test/unit'</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'gem_example'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GemExampleTest</span> <span class="inheritance">&lt; <span class="parent">Test::Unit</span></span>::<span class="title">TestCase</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span>test_english_hello</span><br><span class="line">    assert_equal <span class="string">"hello world"</span>,</span><br><span class="line">      <span class="constant">GemExample</span>.hi(<span class="string">"english"</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span>test_any_hello</span><br><span class="line">    assert_equal <span class="string">"hello world"</span>,</span><br><span class="line">      <span class="constant">GemExample</span>.hi(<span class="string">"ruby"</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span>test_spanish_hello</span><br><span class="line">    assert_equal <span class="string">"hola mundo"</span>,</span><br><span class="line">      <span class="constant">GemExample</span>.hi(<span class="string">"spanish"</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>在<code>Rakefile</code>里添加一些简单的测试用例。<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">require <span class="string">'rake/testtask'</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Rake:</span><span class="symbol">:TestTask</span>.new <span class="keyword">do</span> |t|</span><br><span class="line">  t.libs &lt;&lt; <span class="string">'test'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">desc <span class="string">"Run tests"</span></span><br><span class="line">task <span class="symbol">:default</span> =&gt; <span class="symbol">:test</span></span><br></pre></td></tr></table></figure></p>
<p>之后执行命令<code>rake test</code>或者直接<code>rake</code>，执行结果如下：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">% rake <span class="keyword">test</span></span><br><span class="line">Loaded suite</span><br><span class="line">Started</span><br><span class="line">....</span><br><span class="line">Finished <span class="keyword">in</span> 0.000943 seconds.</span><br><span class="line"></span><br><span class="line">4 tests, 4 assertions, 0 failures, 0 errors, 0 skips</span><br><span class="line"></span><br><span class="line"><span class="keyword">Test</span> <span class="keyword">run</span> options: --seed 15331</span><br></pre></td></tr></table></figure></p>
<h2 id="文档">文档</h2><p>大部分的gem会使用默认内建RDoc来生成文档.有很多的教程可以学习.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GemExample</span></span></span><br><span class="line">  <span class="comment"># Say hi to the world!</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># Example:</span></span><br><span class="line">  <span class="comment">#   &gt;&gt; Hola.hi("spanish")</span></span><br><span class="line">  <span class="comment">#   =&gt; hola mundo</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># Arguments:</span></span><br><span class="line">  <span class="comment">#   language: (String)</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> </span><span class="keyword">self</span>.hi(language = <span class="string">"english"</span>)</span><br><span class="line">    translator = <span class="constant">Translator</span>.new(language)</span><br><span class="line">    puts translator.hi</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2><blockquote>
<ol>
<li><a href="http://guides.rubygems.org/gems-with-extensions/" target="_blank" rel="external">http://guides.rubygems.org/gems-with-extensions/</a> </li>
<li><a href="http://qiita.com/xiangzhuyuan/items/7d3659bcebbaf52a1f12" target="_blank" rel="external">http://qiita.com/xiangzhuyuan/items/7d3659bcebbaf52a1f12</a></li>
</ol>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/03/03/cig9jq2bw001vv5qkw2hebguk/" itemprop="url">
                  Cloud Foundry 社区三月第一周周报
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-03T00:00:00+09:00" content="2015-03-03">
              2015-03-03
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/03/03/cig9jq2bw001vv5qkw2hebguk/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/03/cig9jq2bw001vv5qkw2hebguk/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>欢迎阅读本周的CF周报。经过了两年半英文作者终于同他的好基友Dr Nic在一起了！并且作者表示希望更多的同仁加入基友大家庭。开个玩笑，回到正题。</p>
<ol>
<li><p>新官上任三把火，新上任的CEO Sam Ramji在Bernard Golden的面谈中阐述了他对Cloud Foundry Foundation和PaaS的理解。</p>
</li>
<li><p>Diego 增加了对 .NET 的支持。Pivotal公司的 Mark Kropf 特意发表博文 <a href="http://www.markkropf.com/blog/2015/2/18/windows-cloud-foundy-now-public" target="_blank" rel="external">REPOS FOR WINDOWS SUPPORT IN CLOUD FOUNDRY NOW PUBLIC</a>，博文总结了CF社区在Windows下可运性的组件，如lifecycle, garden, containerizer, diego。不得不说，CF社区的影响力正在迅速扩大，都开始触及Windows了，哈哈。</p>
</li>
<li><p>应用程序员的福利。同样出自 Mark Kropf 之手，<a href="http://www.markkropf.com/blog/2015/2/19/an-applications-view-of-the-cf-stack" target="_blank" rel="external">The Dev View of CF</a>。 站在应用开发者的视角，CF是怎样的一番风景。</p>
</li>
<li><p>Hubot是Github开发的一个好玩的专门用来集成类似于IRC、Slack、Twitter等的bot。具体参见博文：<a href="http://purevirtual.eu/2015/02/18/deploy-githubs-hubot-for-slack-automatically-with-travis-ci-and-cloudfoundry-part-1/" target="_blank" rel="external">installing the Github Hubot on CloudFoundry</a></p>
</li>
<li><p>最近业界的其他PaaS的发展怎样。这两篇文章值得一读：<a href="http://www.paasify.it/vendors" target="_blank" rel="external">Find your Platform as a Service</a> 和 <a href="https://www.uni-bamberg.de/fileadmin/uni/fakultaeten/wiai_lehrstuehle/praktische_informatik/Dateien/Publikationen/sose14-towards-application-portability-in-paas.pdf" target="_blank" rel="external">Towards Application Portability in Platform as a service</a></p>
</li>
<li><p>业界新闻。来自BlueMix的 Niklas Heidloff 介绍了 Docker 和 Cloud Foundry 结合的可能性和前景。<a href="http://heidloff.net/nh/home.nsf/article.xsp?id=20.02.2015092308NHEBUJ.htm" target="_blank" rel="external">Cloud Foundry and Containers</a></p>
</li>
<li><p>感谢 Altoros 为社区贡献了一篇关于GO的博文：<a href="http://blog.altoros.com/golang-part-1-main-concepts-and-project-structure.html" target="_blank" rel="external">The main concepts of Go</a></p>
</li>
<li><p>Node迷请鼓掌！ Kendrick Coleman 根据其经验分享的一篇博文：<a href="http://kendrickcoleman.com/index.php/Tech-Blog/deploying-a-node-js-webapp-with-mongodb-to-cloud-foundry.html" target="_blank" rel="external">Node.js and MongoDB app</a></p>
</li>
<li><p>与以往一样，<a href="https://www.youtube.com/watch?v=6JrHWEYTV1I&amp;feature=youtu.be." target="_blank" rel="external">CloudFoundry After Dark</a></p>
</li>
<li><p>在波特兰(Portland)的CF聚会上，Intel讨论他们的私有云和CF Service Brokers研究情况，<a href="http://www.meetup.com/Portland-Cloud-Foundry-Meetup/events/220425691/" target="_blank" rel="external">文章请点击</a>. </p>
</li>
<li><p>另外Uber的CF聚会也马上要开始了，最后别忘了 <a href="http://www.cfsummit.com/" target="_blank" rel="external">CF Summit 2015</a></p>
</li>
</ol>
<p>原文链接：<a href="http://www.thisweekincf.com/blog/2015/02/27/this-week-in-cloud-foundry-28th-february-2015/" target="_blank" rel="external">This Week in Cloud Foundry 3 March 2015</a></p>
<blockquote>
<p>译者：clongbupt</p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/02/27/cig9jq27q0000v5qkzu12xjw4/" itemprop="url">
                  Cloud Foundry 社区二月第四周周报
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-02-27T00:00:00+09:00" content="2015-02-27">
              2015-02-27
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/02/27/cig9jq27q0000v5qkzu12xjw4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/02/27/cig9jq27q0000v5qkzu12xjw4/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <ol>
<li><p>巨变即将到来。我们处在巨变前的黎明。或许是下周，Cloud Foundry生态体系将会迎来新的客人，那么具体是什么呢？先卖个关子，敬请期待。</p>
</li>
<li><p>Netflix OSS项目，查了下中文资料，发现大家介绍的不是很多。Netflix是AWS最大的用户之一，在AWS各方工具还不太完善的时候，Netflix的技术团队开发了很多有用的工具，来辅助AWS的维护、管理和监控。后来，Netflix将很多有用的工具整理并开源出来了，就是Netflix OSS。项目地址：<a href="https://github.com/Netflix/" target="_blank" rel="external">https://github.com/Netflix/</a></p>
</li>
<li><p>CAB会议，全名Cloudfoundry Advisory Board Meeting。目测是Cloud Foundry社区最重要的会议，参会人员主要是社区各大公司的代表，很多大佬们也一步步坚持到2014年11月的CloudFoundry基金会的成立。最早一期记录：<a href="http://www.activestate.com/blog/2014/01/cloud-foundry-advisory-board-meeting-2014-january" target="_blank" rel="external">2014年一月</a>，最近的一期记录：<a href="http://www.activestate.com/blog/2015/01/cloud-foundry-advisory-board-meeting-2015-january" target="_blank" rel="external">2015年1月</a>。</p>
</li>
<li><p>Doc. Nic这周又给我们带来了惊喜，发布了一个ops工具：<a href="https://github.com/cloudfoundry-community/bosh_cli_plugin_consul#view-services" target="_blank" rel="external">BOSH CLI Consul plugin</a>，通过它可以容易的看到通过bosh deployments部署的服务。</p>
</li>
<li><p><a href="https://blog.starkandwayne.com/2014/12/17/introduction-to-cloud-foundrys-health-monitor/" target="_blank" rel="external">Health Monitor</a> 这篇文章值得关注，它详细讲解了Health manager如何保证app存活以及如何进行错误跟踪。</p>
</li>
<li><p>另外一篇播客也很棒，对于初学者而言，简单的一个push背后究竟发生了什么？播客描述地址：<a href="http://blog.pivotal.io/cloud-foundry-pivotal/features/all-things-pivotal-podcast-episode-11-so-what-happens-when-i-push-an-app-anyway?utm_source=social&amp;account_id&amp;utm_medium=TWITTER&amp;pivotal&amp;utm_campaign=Apps&amp;20150114" target="_blank" rel="external">introduction to the CF concepts</a>。真正的播放地址：<a href="http://traffic.libsyn.com/pivotalsoftwarepodcast/All_Things_Pivotal_Episode_11.mp3" target="_blank" rel="external">http://traffic.libsyn.com/pivotalsoftwarepodcast/All_Things_Pivotal_Episode_11.mp3</a></p>
</li>
</ol>
<p>今天就到这儿啦。三月忽地就来了，天气暖和了，大家在编程之余，也要多出去走走哈。</p>
<p>原文链接：<a href="http://www.thisweekincf.com/blog/2015/02/27/this-week-in-cloud-foundry-28th-february-2015/" target="_blank" rel="external">http://www.thisweekincf.com/blog/2015/02/27/this-week-in-cloud-foundry-28th-february-2015/</a></p>
<blockquote>
<p>译者：clongbupt</p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/02/17/cig9jq2by001wv5qkqz0q6scd/" itemprop="url">
                  Cloud Foundry 社区二月第三周周报
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-02-17T00:00:00+09:00" content="2015-02-17">
              2015-02-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/02/17/cig9jq2by001wv5qkqz0q6scd/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/02/17/cig9jq2by001wv5qkqz0q6scd/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <ol>
<li><p>上周最大的新闻是Cloud Foundry的新CEO上任，欢迎Sam Ramji！在加入Cloud Foundry之前Sam Ramji在Appigee工作，并有在微软设计和领导开源战略的经验。</p>
</li>
<li><p>在Youtube上的Cloud Foundry每周晚例会报告(Cloud Foundry After Dark hangout)</p>
<ul>
<li><p>企业级云发布管理工具Apache Brooklyn有望支持Cloud Foundry</p>
</li>
<li><p>Matt Stine 的新书 《Migrating to Cloud native App Architectures》</p>
</li>
<li><p>Cloudfoundry 的新运行时环境Diego示例介绍</p>
</li>
<li><p>Concouse.io 一个基于CF的CI解决方案介绍</p>
</li>
</ul>
</li>
</ol>
<p>晚例会观看地址：<a href="http://youtu.be/TY_qOyp27X4" target="_blank" rel="external">http://youtu.be/TY_qOyp27X4</a></p>
<ol>
<li><p>Edison 发布的关于 Bosh Lite 在 AWS 上部署的文章。链接: <a href="https://cloudfoundryideas.wordpress.com/2015/01/28/building-a-cloudfoundry-sandbox-environment-in-15-minutes/" target="_blank" rel="external">Bosh-Lite on AWS</a></p>
</li>
<li><p>支持函数式语言 Elixir 的 buildpack 发布。链接：<a href="https://groups.google.com/a/cloudfoundry.org/forum/#!topic/vcap-dev/dOZ9il25u3Y" target="_blank" rel="external">Elixir Buildpack for Cloud Foundry</a></p>
</li>
<li><p>Pivotal 发布了基于开源MySQL版本的CF版MySQL版。链接：<a href="http://blog.pivotal.io/cloud-foundry-pivotal/products/mysql-service-on-pivotal-cloud-foundry-now-highly-available" target="_blank" rel="external">MySQL service for Pivotal CF</a></p>
</li>
</ol>
<p>原文链接：<a href="http://www.thisweekincf.com/blog/2015/02/17/this-week-in-cloud-foundry-february-17th-2015/" target="_blank" rel="external">This Week in Cloud Foundry - February 17th 2015</a></p>
<blockquote>
<p>译者：clongbupt</p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2015/02/16/cig9jq2bv001uv5qksivxcr2g/" itemprop="url">
                  One_Method_to_Debug_Heartbeat_Cluster
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-02-16T16:37:18+09:00" content="2015-02-16">
              2015-02-16
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2015/02/16/cig9jq2bv001uv5qksivxcr2g/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/02/16/cig9jq2bv001uv5qksivxcr2g/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="2014/04/24/cig9jq2b4000fv5qky6j3vv5s/" itemprop="url">
                  博客搭建架构
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-04-24T00:00:00+09:00" content="2014-04-24">
              2014-04-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="2014/04/24/cig9jq2b4000fv5qky6j3vv5s/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/04/24/cig9jq2b4000fv5qky6j3vv5s/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>记录重新设计博客的点滴。</p>
<h2 id="前言">前言</h2><p>去年的这个时候搭了一个简陋的博客。因为太简陋，便没有更新。然后就计划着等有时间了，稍微搭理下。计划是一个下午搞定，不料进行的不太顺利，便有了这篇博客。</p>
<h3 id="准备工作">准备工作</h3><ul>
<li><p>Jekyll</p>
</li>
<li><p>github.io</p>
</li>
<li><p>Flatboot</p>
</li>
<li><p>代码高亮</p>
</li>
<li><p>留言</p>
</li>
<li><p>Grunt</p>
</li>
<li><p>Bower</p>
</li>
</ul>
<h2 id="Jekyll">Jekyll</h2><p>Jekyll是一个Ruby gems，可以在本地对github pages进行开发、调试，非常方便。</p>
<h3 id="安装">安装</h3><p>安装rbenv</p>
<p>安装ruby</p>
<p>安装jekyll</p>
<pre><code>gem <span class="keyword">install</span> jekyll
</code></pre><h3 id="使用">使用</h3><p>入门：</p>
<p><code>jekyll new</code> 创建一个新的项目</p>
<p><code>jekyll build</code> 对已存在的项目进行构建，主要是将yaml和md格式的文档转换成html</p>
<p><code>jekyll serve</code> 启动内置服务器，实现本地网站的浏览</p>
<p>进阶：</p>
<p><code>jekyll serve -w</code>  加入 <code>-w</code> 命令，使其支持在运行的过程中热加载，一旦有更新，即刻反映到页面。</p>
<h2 id="flatboot">flatboot</h2><p>Flatboot是对bootstrap做扁平化设计的一个前端框架。</p>
<h2 id="Grunt">Grunt</h2><p>Grunt可以是静态资源的管理，非常适合只有纯静态资源的github-pages博客。</p>
<h3 id="安装-1">安装</h3><ul>
<li>安装Node</li>
<li>安装NPM</li>
<li>安装Grunt</li>
</ul>
<h3 id="使用-1">使用</h3><p><code>grunt init</code> 初始化，会生成<code>Gruntfile.json</code>文件</p>
<p>在<code>Gruntfile.json</code>文件中配置对前端资源文件的处理，如JS、CSS文件的合并，压缩。定制控制命令</p>
<p><code>grunt [command]</code>  运行对应的命令，完成相应操作。</p>
<h2 id="Bower">Bower</h2><p>js库的管理器，通过简单的命令可以实现对项目中引入的JS库进行版本控制和管理。</p>
<h3 id="安装-2">安装</h3><ul>
<li>安装Node</li>
<li>安装NPM</li>
<li>安装Bower</li>
</ul>
<h3 id="使用-2">使用</h3><p><code>bower init</code> 初始化功能，主要是生成<code>bower.json</code>文件</p>
<p><code>bower install</code> 读取<code>bower.json</code> 文件，根据其中的<code>dependencies</code>域安装项目所需JS库。</p>
<p><code>.bowerrc</code>   配置<code>bower install</code>下载的js库的存放位置</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="page/2/">2</a><a class="extend next" rel="next" href="page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


 </div>

        

        
      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/img/avatar.png" alt="clongbupt" itemprop="image"/>
          <p class="site-author-name" itemprop="name">clongbupt</p>
        </div>
        <p class="site-description motion-element" itemprop="description">一个不会煮面的码农的小窝</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">19</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            
              <span class="site-state-item-count">16</span>
              <span class="site-state-item-name">标签</span>
              
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/clongbupt/" target="_blank">
                  <i class="fa fa-github fa-fw"></i> GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://facebook.com/clongbupt/" target="_blank">
                  <i class="fa fa-facebook fa-fw"></i> Facebook
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/clongbupt" target="_blank">
                  <i class="fa fa-twitter fa-fw"></i> Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.weibo.com/u/1085595672" target="_blank">
                  <i class="fa fa-weibo fa-fw"></i> Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/clongbupt" target="_blank">
                  <i class="fa fa-douban fa-fw"></i> DouBan
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">clongbupt</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"clongbupt"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  
  
  <script type="text/javascript" src="vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="js/helpers.js?v=0.4.5.2"></script>
  

  <script type="text/javascript" src="vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="js/motion_global.js?v=0.4.5.2" id="motion.global"></script>




  <script type="text/javascript" src="js/nav-toggle.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {

      isMobile() && FastClick.attach(document.body);

      // Define Motion Sequence.
      motionIntegrator
        .add(motionMiddleWares.logo)
        .add(motionMiddleWares.menu)
        .add(motionMiddleWares.backToTop)
        .add(motionMiddleWares.postList)
        .add(motionMiddleWares.sidebar);

      // Bootstrap Motion.
      motionIntegrator.bootstrap();
    });
  </script>

  
  

  
  

  
  <script type="text/javascript" src="js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
